<div class="dashboard-container">
  
  <header class="dashboard-header">
    <div class="header-content">
      <img src="assets/logo-impro.png" alt="Logo" class="header-logo">
      <h2>Administraci√≥n de Usuarios</h2>
    </div>
    <div class="user-controls">
      <span>Hola, <strong>{{ currentUser }}</strong></span>
      <button (click)="logout()" class="btn-logout">Cerrar Sesi√≥n</button>
    </div>
  </header>

  <div class="content-wrapper">
    
    <div class="card form-card">
      <div class="card-header">
        <h3>{{ isEditing ? 'Editar Usuario' : 'Nuevo Usuario' }}</h3>
      </div>
      <div class="card-body">
        <form (ngSubmit)="onSubmit()" #form="ngForm">
          
          <div class="form-group">
            <label>Nombre</label>
            <input type="text" [(ngModel)]="userForm.nombre" name="nombre" required placeholder="Ej: Juan">
          </div>

          <div class="form-group">
            <label>Apellido</label>
            <input type="text" [(ngModel)]="userForm.apellido" name="apellido" required placeholder="Ej: P√©rez">
          </div>

          <div class="form-group">
            <label>Correo</label>
            <input type="email" [(ngModel)]="userForm.correo" name="correo" required email placeholder="correo@impro.com">
          </div>

          <div class="form-group" *ngIf="!isEditing">
            <label>Contrase√±a</label>
            <input type="password" [(ngModel)]="userForm.password" name="pass" required minlength="4" placeholder="****">
          </div>

          <div class="form-group">
            <label>Rol</label>
            <select [(ngModel)]="userForm.idRol" name="rol" required>
              <option [value]="1">Administrador</option>
              <option [value]="2">Operador</option>
            </select>
          </div>

          <div class="form-group checkbox-group" *ngIf="isEditing">
            <label>
              <input type="checkbox" [(ngModel)]="userForm.active" name="active"> 
              Usuario Activo
            </label>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-save" [disabled]="form.invalid">
              {{ isEditing ? 'Actualizar' : 'Crear' }}
            </button>
            <button type="button" class="btn-cancel" (click)="resetForm()" *ngIf="isEditing">
              Cancelar
            </button>
          </div>

        </form>
      </div>
    </div>

    <div class="card table-card">
      <div class="card-header">
        <h3>Usuarios Registrados</h3>
      </div>
      <div class="card-body table-responsive">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Correo</th>
              <th>Rol</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.nombre }} {{ user.apellido }}</td>
              <td>{{ user.correo }}</td>
              <td><span class="badge role-badge">{{ user.rolNombre }}</span></td>
              <td>
                <span [class]="user.active ? 'status-active' : 'status-inactive'">
                  {{ user.active ? 'Activo' : 'Inactivo' }}
                </span>
              </td>
              <td class="actions">
                <button (click)="editUser(user)" class="btn-icon edit" title="Editar">‚úèÔ∏è</button>
                <button (click)="deleteUser(user.id)" class="btn-icon delete" title="Eliminar">üóëÔ∏è</button>
              </td>
            </tr>
            <tr *ngIf="users.length === 0">
              <td colspan="6" class="text-center">No hay usuarios registrados.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>